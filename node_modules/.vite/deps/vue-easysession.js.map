{
  "version": 3,
  "sources": ["../../vue-easysession/session-storage/index.js", "../../vue-easysession/index.js", "dep:vue-easysession"],
  "sourcesContent": ["'use strict';\r\n\r\n/**\r\n * Create a new instance of SessionStorage\r\n *\r\n * @param {Object} instanceConfig The default config for the instance\r\n */\r\nfunction SessionStorage(options) {\r\n  var key = 'vue-session-key';\r\n  if (options && options.keySession !== undefined) {\r\n    key = options.keySession\r\n  }\r\n  if (options && options.expireSessionCallback !== undefined) {\r\n    this.expireSessionCallback = options.expireSessionCallback\r\n  }\r\n\r\n  this.mainKeySession = key;\r\n  this.storage = this.getStorage(options);\r\n}\r\n\r\nSessionStorage.prototype.getAll = function () {\r\n  var all = JSON.parse(this.storage.getItem(this.mainKeySession));\r\n  return all || {};\r\n}\r\n\r\nSessionStorage.prototype.setAll = function (all) {\r\n  this.storage.setItem(this.mainKeySession, JSON.stringify(all));\r\n}\r\n\r\nSessionStorage.prototype.set = function (key, value) {\r\n  if (key == 'session-id') return false;\r\n  var all = this.getAll();\r\n\r\n  if (!('session-id' in all)) {\r\n    this.start();\r\n    all = this.getAll();\r\n  }\r\n  all[key] = value;\r\n\r\n  this.setAll(all);\r\n}\r\n\r\nSessionStorage.prototype.get = function (key) {\r\n  var all = this.getAll();\r\n  return all[key];\r\n}\r\n\r\nSessionStorage.prototype.start = function (exp) {\r\n  var all = this.getAll();\r\n  var time = new Date();\r\n\r\n  all['session-id'] = 'sess:' + time.toJSON();\r\n\r\n  if (exp !== undefined) {\r\n    var expiration = new Date();\r\n    expiration.setMilliseconds(expiration.getMilliseconds() + exp);\r\n    all['session-control'] = {\r\n      expiration: expiration.toJSON(),\r\n      exp: exp,\r\n      time: time\r\n    }\r\n\r\n    setTimeout(this.expireSession.bind(this), exp);\r\n  }\r\n\r\n  this.setAll(all);\r\n}\r\n\r\nSessionStorage.prototype.expireSession = function () {\r\n  this.destroy()\r\n  this.expireSessionCallback()\r\n}\r\n\r\nSessionStorage.prototype.runExpire = function () {\r\n  var all = this.getAll();\r\n  var sessionControl = all['session-control']\r\n  if (sessionControl && sessionControl.expiration !== undefined && sessionControl.exp !== undefined) {\r\n    var time = new Date();\r\n    if (sessionControl.expiration <= time) {\r\n      this.destroy()\r\n      window.location.href = ''\r\n    } else {\r\n      setTimeout(this.expireSession.bind(this), new Date(sessionControl.expiration) - time)\r\n    }\r\n  }\r\n}\r\n\r\nSessionStorage.prototype.renew = function (sessionId) {\r\n  var all = this.getAll();\r\n  all['session-id'] = 'sess:' + sessionId;\r\n  this.setAll(all);\r\n}\r\n\r\nSessionStorage.prototype.exists = function () {\r\n  var all = this.getAll();\r\n  return 'session-id' in all;\r\n}\r\n\r\nSessionStorage.prototype.has = function (key) {\r\n  var all = this.getAll();\r\n  return key in all;\r\n}\r\n\r\nSessionStorage.prototype.remove = function (key) {\r\n  var all = this.getAll();\r\n  delete all[key];\r\n\r\n  this.setAll(all);\r\n}\r\n\r\nSessionStorage.prototype.clear = function () {\r\n  var all = this.getAll();\r\n\r\n  this.setAll({ 'session-id': all['session-id'] });\r\n}\r\n\r\nSessionStorage.prototype.destroy = function () {\r\n  this.setAll({});\r\n}\r\n\r\nSessionStorage.prototype.id = function () {\r\n  return this.get('session-id');\r\n}\r\n\r\nSessionStorage.prototype.storageAvailable = function (type) {\r\n  try {\r\n    var storage = window[type],\r\n      x = '__storage_test__';\r\n    storage.setItem(x, x);\r\n    storage.removeItem(x);\r\n    return true;\r\n  }\r\n  catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\nSessionStorage.prototype.getStorage = function (options) {\r\n  var STORAGE = window.sessionStorage;\r\n  if (options == undefined) {\r\n    if (this.storageAvailable('localStorage')) {\r\n      STORAGE = window.localStorage;\r\n    }\r\n  } else {\r\n    if (options && 'persist' in options && options.persist) STORAGE = window.localStorage;\r\n    else STORAGE = window.sessionStorage;\r\n  }\r\n  return STORAGE\r\n}\r\n\r\n\r\nconst sessionStorageInstance = {\r\n  create: function (options) {\r\n    return new SessionStorage(options);\r\n  }\r\n}\r\n\r\nmodule.exports = sessionStorageInstance\r\n", "var sessionStorage = require('./session-storage')\r\n\r\nconst VueEasySession = {\r\n    install: function (Vue, options) {\r\n        Vue.prototype.$session = sessionStorage.create(options);\r\n        Vue.prototype.$session.runExpire()\r\n    },\r\n\r\n    getInstance: function (options) {\r\n        return sessionStorage.create(options);\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = VueEasySession;\r\n", "export default require(\"./node_modules/vue-easysession/index.js\");"],
  "mappings": ";;;;;AAAA;AAAA;AAAA;AAOA,aAAS,eAAe,SAAS;AAC/B,UAAI,MAAM;AACV,UAAI,WAAW,QAAQ,eAAe,QAAW;AAC/C,cAAM,QAAQ;AAAA,MAChB;AACA,UAAI,WAAW,QAAQ,0BAA0B,QAAW;AAC1D,aAAK,wBAAwB,QAAQ;AAAA,MACvC;AAEA,WAAK,iBAAiB;AACtB,WAAK,UAAU,KAAK,WAAW,OAAO;AAAA,IACxC;AAEA,mBAAe,UAAU,SAAS,WAAY;AAC5C,UAAI,MAAM,KAAK,MAAM,KAAK,QAAQ,QAAQ,KAAK,cAAc,CAAC;AAC9D,aAAO,OAAO,CAAC;AAAA,IACjB;AAEA,mBAAe,UAAU,SAAS,SAAU,KAAK;AAC/C,WAAK,QAAQ,QAAQ,KAAK,gBAAgB,KAAK,UAAU,GAAG,CAAC;AAAA,IAC/D;AAEA,mBAAe,UAAU,MAAM,SAAU,KAAK,OAAO;AACnD,UAAI,OAAO;AAAc,eAAO;AAChC,UAAI,MAAM,KAAK,OAAO;AAEtB,UAAI,EAAE,gBAAgB,MAAM;AAC1B,aAAK,MAAM;AACX,cAAM,KAAK,OAAO;AAAA,MACpB;AACA,UAAI,OAAO;AAEX,WAAK,OAAO,GAAG;AAAA,IACjB;AAEA,mBAAe,UAAU,MAAM,SAAU,KAAK;AAC5C,UAAI,MAAM,KAAK,OAAO;AACtB,aAAO,IAAI;AAAA,IACb;AAEA,mBAAe,UAAU,QAAQ,SAAU,KAAK;AAC9C,UAAI,MAAM,KAAK,OAAO;AACtB,UAAI,OAAO,IAAI,KAAK;AAEpB,UAAI,gBAAgB,UAAU,KAAK,OAAO;AAE1C,UAAI,QAAQ,QAAW;AACrB,YAAI,aAAa,IAAI,KAAK;AAC1B,mBAAW,gBAAgB,WAAW,gBAAgB,IAAI,GAAG;AAC7D,YAAI,qBAAqB;AAAA,UACvB,YAAY,WAAW,OAAO;AAAA,UAC9B;AAAA,UACA;AAAA,QACF;AAEA,mBAAW,KAAK,cAAc,KAAK,IAAI,GAAG,GAAG;AAAA,MAC/C;AAEA,WAAK,OAAO,GAAG;AAAA,IACjB;AAEA,mBAAe,UAAU,gBAAgB,WAAY;AACnD,WAAK,QAAQ;AACb,WAAK,sBAAsB;AAAA,IAC7B;AAEA,mBAAe,UAAU,YAAY,WAAY;AAC/C,UAAI,MAAM,KAAK,OAAO;AACtB,UAAI,iBAAiB,IAAI;AACzB,UAAI,kBAAkB,eAAe,eAAe,UAAa,eAAe,QAAQ,QAAW;AACjG,YAAI,OAAO,IAAI,KAAK;AACpB,YAAI,eAAe,cAAc,MAAM;AACrC,eAAK,QAAQ;AACb,iBAAO,SAAS,OAAO;AAAA,QACzB,OAAO;AACL,qBAAW,KAAK,cAAc,KAAK,IAAI,GAAG,IAAI,KAAK,eAAe,UAAU,IAAI,IAAI;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,mBAAe,UAAU,QAAQ,SAAU,WAAW;AACpD,UAAI,MAAM,KAAK,OAAO;AACtB,UAAI,gBAAgB,UAAU;AAC9B,WAAK,OAAO,GAAG;AAAA,IACjB;AAEA,mBAAe,UAAU,SAAS,WAAY;AAC5C,UAAI,MAAM,KAAK,OAAO;AACtB,aAAO,gBAAgB;AAAA,IACzB;AAEA,mBAAe,UAAU,MAAM,SAAU,KAAK;AAC5C,UAAI,MAAM,KAAK,OAAO;AACtB,aAAO,OAAO;AAAA,IAChB;AAEA,mBAAe,UAAU,SAAS,SAAU,KAAK;AAC/C,UAAI,MAAM,KAAK,OAAO;AACtB,aAAO,IAAI;AAEX,WAAK,OAAO,GAAG;AAAA,IACjB;AAEA,mBAAe,UAAU,QAAQ,WAAY;AAC3C,UAAI,MAAM,KAAK,OAAO;AAEtB,WAAK,OAAO,EAAE,cAAc,IAAI,cAAc,CAAC;AAAA,IACjD;AAEA,mBAAe,UAAU,UAAU,WAAY;AAC7C,WAAK,OAAO,CAAC,CAAC;AAAA,IAChB;AAEA,mBAAe,UAAU,KAAK,WAAY;AACxC,aAAO,KAAK,IAAI,YAAY;AAAA,IAC9B;AAEA,mBAAe,UAAU,mBAAmB,SAAU,MAAM;AAC1D,UAAI;AACF,YAAI,UAAU,OAAO,OACnB,IAAI;AACN,gBAAQ,QAAQ,GAAG,CAAC;AACpB,gBAAQ,WAAW,CAAC;AACpB,eAAO;AAAA,MACT,SACO,GAAP;AACE,eAAO;AAAA,MACT;AAAA,IACF;AAEA,mBAAe,UAAU,aAAa,SAAU,SAAS;AACvD,UAAI,UAAU,OAAO;AACrB,UAAI,WAAW,QAAW;AACxB,YAAI,KAAK,iBAAiB,cAAc,GAAG;AACzC,oBAAU,OAAO;AAAA,QACnB;AAAA,MACF,OAAO;AACL,YAAI,WAAW,aAAa,WAAW,QAAQ;AAAS,oBAAU,OAAO;AAAA;AACpE,oBAAU,OAAO;AAAA,MACxB;AACA,aAAO;AAAA,IACT;AAGA,QAAM,yBAAyB;AAAA,MAC7B,QAAQ,SAAU,SAAS;AACzB,eAAO,IAAI,eAAe,OAAO;AAAA,MACnC;AAAA,IACF;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC7JjB;AAAA;AAAA,QAAI,iBAAiB;AAErB,QAAM,iBAAiB;AAAA,MACnB,SAAS,SAAU,KAAK,SAAS;AAC7B,YAAI,UAAU,WAAW,eAAe,OAAO,OAAO;AACtD,YAAI,UAAU,SAAS,UAAU;AAAA,MACrC;AAAA,MAEA,aAAa,SAAU,SAAS;AAC5B,eAAO,eAAe,OAAO,OAAO;AAAA,MACxC;AAAA,IAEJ;AAEA,WAAO,UAAU;AAAA;AAAA;;;ACdjB,IAAO,0BAAQ;",
  "names": []
}
